\hypertarget{scripts_2investigation_8py}{}\doxysection{scripts/investigation.py File Reference}
\label{scripts_2investigation_8py}\index{scripts/investigation.py@{scripts/investigation.py}}


node implementing the investigation part of the robot  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def {\bfseries investigation.\+check\+\_\+hypothesis\+\_\+not\+\_\+exist} (hyp\+\_\+id)
\begin{DoxyCompactList}\small\item\em Function that check if an hypothesis does not exists. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+get\+\_\+weapons\+\_\+with\+\_\+id} (hyp\+\_\+id)
\begin{DoxyCompactList}\small\item\em Function that gets the weapons with id. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+get\+\_\+persons\+\_\+with\+\_\+id} (hyp\+\_\+id)
\begin{DoxyCompactList}\small\item\em Function that gets the persons with id. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+get\+\_\+places\+\_\+with\+\_\+id} (hyp\+\_\+id)
\begin{DoxyCompactList}\small\item\em Function that gets the places with id. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+manage\+\_\+add\+\_\+hint\+\_\+wrt\+\_\+hypothesis} (hyp\+\_\+id)
\begin{DoxyCompactList}\small\item\em Manage add hint function w.\+r.\+t. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+disjoint\+\_\+person} (ind)
\begin{DoxyCompactList}\small\item\em Disjoint person in armor. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+disjoint\+\_\+weapon} (ind)
\begin{DoxyCompactList}\small\item\em Disjoint weapon in armor. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+disjoint\+\_\+place} (ind)
\begin{DoxyCompactList}\small\item\em Disjoint place in armor. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+add\+\_\+person} (msg)
\begin{DoxyCompactList}\small\item\em Add person in armor. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+add\+\_\+weapon} (msg)
\begin{DoxyCompactList}\small\item\em Add weapon in armor. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+add\+\_\+place} (msg)
\begin{DoxyCompactList}\small\item\em Add place in armor. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+reason} ()
\begin{DoxyCompactList}\small\item\em Reason function. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+add\+\_\+hint} (msg)
\begin{DoxyCompactList}\small\item\em Add a new ind. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+query\+\_\+hp\+\_\+completeness} ()
\begin{DoxyCompactList}\small\item\em Query complete hypotheses ~\newline
 \end{DoxyCompactList}\item 
def {\bfseries investigation.\+query\+\_\+hp\+\_\+inconsistent} ()
\begin{DoxyCompactList}\small\item\em Query inconsistent hypotheses. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+retrieve\+\_\+consistent\+\_\+hp} ()
\begin{DoxyCompactList}\small\item\em Retrieve consistent hypothesis. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+retrieve\+\_\+hypothesis} (id)
\begin{DoxyCompactList}\small\item\em Retrieve hypothesis. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+create\+\_\+json\+\_\+hypothesis} (id, file)
\begin{DoxyCompactList}\small\item\em Create json hypothesis. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+investigate} (msg)
\begin{DoxyCompactList}\small\item\em Investigate. \end{DoxyCompactList}\item 
def {\bfseries investigation.\+main} ()
\begin{DoxyCompactList}\small\item\em Main. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
node implementing the investigation part of the robot 

\begin{DoxyAuthor}{Author}
Enzo Ubaldo Petrocco 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
November 2021
\end{DoxyDate}
Publishes to\+:~\newline
 None

Service\+Server\+:~\newline
 /investigate (Experimental\+Robotics\+Lab.\+srv.\+Investigate)

Service\+Cline\+:~\newline
 /armor\+\_\+client (Armor client is given through armor\+\_\+api\+\_\+scripts) /send\+\_\+hint (Experimental\+Robotics\+Lab.\+srv.\+Hint)

Action\+Server\+:~\newline
 None

Description\+:

investigate.\+py is a script which manages the communication between the armor client and the robot. It asks the oracle for a hint and then reason in order to get complete hypotheses, if it get them, it writes them in a file\+: \textquotesingle{}consistent\+\_\+hypotheses.\+json\textquotesingle{} 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ad516192888d23f652a23987e24feea02}\label{build_2catkin__generated_2installspace_2investigation_8py_ad516192888d23f652a23987e24feea02}} 
\index{investigation.py@{investigation.py}!add\_hint@{add\_hint}}
\index{add\_hint@{add\_hint}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{add\_hint()}{add\_hint()}}
{\footnotesize\ttfamily def investigation.\+add\+\_\+hint (\begin{DoxyParamCaption}\item[{msg}]{ }\end{DoxyParamCaption})}



Add a new ind. 

/add\+\_\+hint callback The function manages the add function in armor /param msg (\{id, name, type\}) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ab64e115935302d76e1d8b2f8f7fcc8a5}\label{build_2catkin__generated_2installspace_2investigation_8py_ab64e115935302d76e1d8b2f8f7fcc8a5}} 
\index{investigation.py@{investigation.py}!add\_person@{add\_person}}
\index{add\_person@{add\_person}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{add\_person()}{add\_person()}}
{\footnotesize\ttfamily def investigation.\+add\+\_\+person (\begin{DoxyParamCaption}\item[{msg}]{ }\end{DoxyParamCaption})}



Add person in armor. 

/add\+\_\+person function The function adds to armor the person defined in the message /param msg (\{id, name, type\}) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ac417eef4f63e22ba98fb9b1c305b532f}\label{build_2catkin__generated_2installspace_2investigation_8py_ac417eef4f63e22ba98fb9b1c305b532f}} 
\index{investigation.py@{investigation.py}!add\_place@{add\_place}}
\index{add\_place@{add\_place}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{add\_place()}{add\_place()}}
{\footnotesize\ttfamily def investigation.\+add\+\_\+place (\begin{DoxyParamCaption}\item[{msg}]{ }\end{DoxyParamCaption})}



Add place in armor. 

/add\+\_\+place function The function adds to armor the place defined in the message /param msg (\{id, name, type\}) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a797529280e7da286c92fc744f5c40402}\label{build_2catkin__generated_2installspace_2investigation_8py_a797529280e7da286c92fc744f5c40402}} 
\index{investigation.py@{investigation.py}!add\_weapon@{add\_weapon}}
\index{add\_weapon@{add\_weapon}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{add\_weapon()}{add\_weapon()}}
{\footnotesize\ttfamily def investigation.\+add\+\_\+weapon (\begin{DoxyParamCaption}\item[{msg}]{ }\end{DoxyParamCaption})}



Add weapon in armor. 

/add\+\_\+weapon function The function adds to armor the weapon defined in the message /param msg (\{id, name, type\}) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ac6afb85bd6357f84770b5ecfd04f262c}\label{build_2catkin__generated_2installspace_2investigation_8py_ac6afb85bd6357f84770b5ecfd04f262c}} 
\index{investigation.py@{investigation.py}!check\_hypothesis\_not\_exist@{check\_hypothesis\_not\_exist}}
\index{check\_hypothesis\_not\_exist@{check\_hypothesis\_not\_exist}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{check\_hypothesis\_not\_exist()}{check\_hypothesis\_not\_exist()}}
{\footnotesize\ttfamily def investigation.\+check\+\_\+hypothesis\+\_\+not\+\_\+exist (\begin{DoxyParamCaption}\item[{hyp\+\_\+id}]{ }\end{DoxyParamCaption})}



Function that check if an hypothesis does not exists. 

/check\+\_\+hypothesis\+\_\+not\+\_\+exist function The function returns true if an hypothesis has been added to the local list previously or not /param hyp\+\_\+id (string) /return bool \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_aadea67628b60118e58bab12df728b727}\label{build_2catkin__generated_2installspace_2investigation_8py_aadea67628b60118e58bab12df728b727}} 
\index{investigation.py@{investigation.py}!create\_json\_hypothesis@{create\_json\_hypothesis}}
\index{create\_json\_hypothesis@{create\_json\_hypothesis}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{create\_json\_hypothesis()}{create\_json\_hypothesis()}}
{\footnotesize\ttfamily def investigation.\+create\+\_\+json\+\_\+hypothesis (\begin{DoxyParamCaption}\item[{id}]{,  }\item[{file}]{ }\end{DoxyParamCaption})}



Create json hypothesis. 

/create\+\_\+json\+\_\+hypothesis function Create the json hypothesis from the file /param id (string) /param file (file object) /return file \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a1173edddc6f0254e9f4f0f332968364b}\label{build_2catkin__generated_2installspace_2investigation_8py_a1173edddc6f0254e9f4f0f332968364b}} 
\index{investigation.py@{investigation.py}!disjoint\_person@{disjoint\_person}}
\index{disjoint\_person@{disjoint\_person}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{disjoint\_person()}{disjoint\_person()}}
{\footnotesize\ttfamily def investigation.\+disjoint\+\_\+person (\begin{DoxyParamCaption}\item[{ind}]{ }\end{DoxyParamCaption})}



Disjoint person in armor. 

/disjoint\+\_\+person The function tells armor that this ind is different from any other ind of the same class /param ind (armor ind object) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a0c7973a8749d141b18867241c2604b5c}\label{build_2catkin__generated_2installspace_2investigation_8py_a0c7973a8749d141b18867241c2604b5c}} 
\index{investigation.py@{investigation.py}!disjoint\_place@{disjoint\_place}}
\index{disjoint\_place@{disjoint\_place}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{disjoint\_place()}{disjoint\_place()}}
{\footnotesize\ttfamily def investigation.\+disjoint\+\_\+place (\begin{DoxyParamCaption}\item[{ind}]{ }\end{DoxyParamCaption})}



Disjoint place in armor. 

/disjoint\+\_\+weapon function The function tells armor that this ind is different from any other ind of the same class /param ind (armor ind object) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a28828e7f841320ab5429e581c19c2612}\label{build_2catkin__generated_2installspace_2investigation_8py_a28828e7f841320ab5429e581c19c2612}} 
\index{investigation.py@{investigation.py}!disjoint\_weapon@{disjoint\_weapon}}
\index{disjoint\_weapon@{disjoint\_weapon}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{disjoint\_weapon()}{disjoint\_weapon()}}
{\footnotesize\ttfamily def investigation.\+disjoint\+\_\+weapon (\begin{DoxyParamCaption}\item[{ind}]{ }\end{DoxyParamCaption})}



Disjoint weapon in armor. 

/disjoint\+\_\+weapon function The function tells armor that this ind is different from any other ind of the same class /param ind (armor ind object) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_abcf3d8ae31db8456c98c584afe2cc4c2}\label{build_2catkin__generated_2installspace_2investigation_8py_abcf3d8ae31db8456c98c584afe2cc4c2}} 
\index{investigation.py@{investigation.py}!get\_persons\_with\_id@{get\_persons\_with\_id}}
\index{get\_persons\_with\_id@{get\_persons\_with\_id}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{get\_persons\_with\_id()}{get\_persons\_with\_id()}}
{\footnotesize\ttfamily def investigation.\+get\+\_\+persons\+\_\+with\+\_\+id (\begin{DoxyParamCaption}\item[{hyp\+\_\+id}]{ }\end{DoxyParamCaption})}



Function that gets the persons with id. 

/get\+\_\+persons\+\_\+with\+\_\+id function It gets the persons from the local list with id identical to hyp\+\_\+id /param hyp\+\_\+id (string) /return person object (\{id, name\}) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a911ce7db1cd4f245632ba84dce0b0c14}\label{build_2catkin__generated_2installspace_2investigation_8py_a911ce7db1cd4f245632ba84dce0b0c14}} 
\index{investigation.py@{investigation.py}!get\_places\_with\_id@{get\_places\_with\_id}}
\index{get\_places\_with\_id@{get\_places\_with\_id}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{get\_places\_with\_id()}{get\_places\_with\_id()}}
{\footnotesize\ttfamily def investigation.\+get\+\_\+places\+\_\+with\+\_\+id (\begin{DoxyParamCaption}\item[{hyp\+\_\+id}]{ }\end{DoxyParamCaption})}



Function that gets the places with id. 

/get\+\_\+places\+\_\+with\+\_\+id function It gets the places from the local list with id identical to hyp\+\_\+id /param hyp\+\_\+id (string) /return place object (\{id,name\}) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ab4eaacc0d8c6f5a1322a1e7628ef3bd4}\label{build_2catkin__generated_2installspace_2investigation_8py_ab4eaacc0d8c6f5a1322a1e7628ef3bd4}} 
\index{investigation.py@{investigation.py}!get\_weapons\_with\_id@{get\_weapons\_with\_id}}
\index{get\_weapons\_with\_id@{get\_weapons\_with\_id}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{get\_weapons\_with\_id()}{get\_weapons\_with\_id()}}
{\footnotesize\ttfamily def investigation.\+get\+\_\+weapons\+\_\+with\+\_\+id (\begin{DoxyParamCaption}\item[{hyp\+\_\+id}]{ }\end{DoxyParamCaption})}



Function that gets the weapons with id. 

/get\+\_\+weapons\+\_\+with\+\_\+id function It gets the weapons from the local list with id identical to hyp\+\_\+id /param hyp\+\_\+id (string) /return weapon object(\{id,name\}) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ac32b136c2f1fdd9f92115670bbc2e192}\label{build_2catkin__generated_2installspace_2investigation_8py_ac32b136c2f1fdd9f92115670bbc2e192}} 
\index{investigation.py@{investigation.py}!investigate@{investigate}}
\index{investigate@{investigate}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{investigate()}{investigate()}}
{\footnotesize\ttfamily def investigation.\+investigate (\begin{DoxyParamCaption}\item[{msg}]{ }\end{DoxyParamCaption})}



Investigate. 

/investigate callback This function ask for a hint, add the hint to armor, gets consistent hypotheses, adds consistent hypotheses which have not been taken into account before and set them into a json file /param msg () /returns True \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a863e6d3d7d26e1c8de8459483e4d05b5}\label{build_2catkin__generated_2installspace_2investigation_8py_a863e6d3d7d26e1c8de8459483e4d05b5}} 
\index{investigation.py@{investigation.py}!main@{main}}
\index{main@{main}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def investigation.\+main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Main. 

/main function The function represents the initialization of the node where armor clients is initialized and also hint client and investigate service are initialized. \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a7c8d214254f78b0428080713ff34e182}\label{build_2catkin__generated_2installspace_2investigation_8py_a7c8d214254f78b0428080713ff34e182}} 
\index{investigation.py@{investigation.py}!manage\_add\_hint\_wrt\_hypothesis@{manage\_add\_hint\_wrt\_hypothesis}}
\index{manage\_add\_hint\_wrt\_hypothesis@{manage\_add\_hint\_wrt\_hypothesis}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{manage\_add\_hint\_wrt\_hypothesis()}{manage\_add\_hint\_wrt\_hypothesis()}}
{\footnotesize\ttfamily def investigation.\+manage\+\_\+add\+\_\+hint\+\_\+wrt\+\_\+hypothesis (\begin{DoxyParamCaption}\item[{hyp\+\_\+id}]{ }\end{DoxyParamCaption})}



Manage add hint function w.\+r.\+t. 

hypothesis /manage\+\_\+add\+\_\+hint\+\_\+wrt\+\_\+hypothesis function if an hypothesis does not exists it appends the name to the local list /param hyp\+\_\+id (string) \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ab08012a4fb0555c597c85e2212d2727d}\label{build_2catkin__generated_2installspace_2investigation_8py_ab08012a4fb0555c597c85e2212d2727d}} 
\index{investigation.py@{investigation.py}!query\_hp\_completeness@{query\_hp\_completeness}}
\index{query\_hp\_completeness@{query\_hp\_completeness}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{query\_hp\_completeness()}{query\_hp\_completeness()}}
{\footnotesize\ttfamily def investigation.\+query\+\_\+hp\+\_\+completeness (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Query complete hypotheses ~\newline
 

/query\+\_\+hp\+\_\+completeness function The function retrieves a list of complete hypotheses /return list of complete hypotheses \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ab86a72c0a0309241ac4cda6579816ac1}\label{build_2catkin__generated_2installspace_2investigation_8py_ab86a72c0a0309241ac4cda6579816ac1}} 
\index{investigation.py@{investigation.py}!query\_hp\_inconsistent@{query\_hp\_inconsistent}}
\index{query\_hp\_inconsistent@{query\_hp\_inconsistent}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{query\_hp\_inconsistent()}{query\_hp\_inconsistent()}}
{\footnotesize\ttfamily def investigation.\+query\+\_\+hp\+\_\+inconsistent (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Query inconsistent hypotheses. 

/query\+\_\+hp\+\_\+inconsistent function The function retrieves a list of inconsistent hypotheses /return list of inconsistent hypotheses \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a000daa1d4ea3d98446ec3ea910d3172d}\label{build_2catkin__generated_2installspace_2investigation_8py_a000daa1d4ea3d98446ec3ea910d3172d}} 
\index{investigation.py@{investigation.py}!reason@{reason}}
\index{reason@{reason}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{reason()}{reason()}}
{\footnotesize\ttfamily def investigation.\+reason (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reason function. 

/reason function The function calls reason armor client function \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_ae64f82652d6134a5d8be8b58ead2e87a}\label{build_2catkin__generated_2installspace_2investigation_8py_ae64f82652d6134a5d8be8b58ead2e87a}} 
\index{investigation.py@{investigation.py}!retrieve\_consistent\_hp@{retrieve\_consistent\_hp}}
\index{retrieve\_consistent\_hp@{retrieve\_consistent\_hp}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{retrieve\_consistent\_hp()}{retrieve\_consistent\_hp()}}
{\footnotesize\ttfamily def investigation.\+retrieve\+\_\+consistent\+\_\+hp (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Retrieve consistent hypothesis. 

/query\+\_\+hp\+\_\+consistent function The function retrieves a list of consistent hypotheses and writes them in the file /return list of consistent hypotheses \mbox{\Hypertarget{build_2catkin__generated_2installspace_2investigation_8py_a109c6317a14379b5467d059cdd27fd80}\label{build_2catkin__generated_2installspace_2investigation_8py_a109c6317a14379b5467d059cdd27fd80}} 
\index{investigation.py@{investigation.py}!retrieve\_hypothesis@{retrieve\_hypothesis}}
\index{retrieve\_hypothesis@{retrieve\_hypothesis}!investigation.py@{investigation.py}}
\doxysubsubsection{\texorpdfstring{retrieve\_hypothesis()}{retrieve\_hypothesis()}}
{\footnotesize\ttfamily def investigation.\+retrieve\+\_\+hypothesis (\begin{DoxyParamCaption}\item[{id}]{ }\end{DoxyParamCaption})}



Retrieve hypothesis. 

/retrieve\+\_\+hypothesis function The function retrieves an integer hypothesis with a specific id /param id (string) /return hypothesis object (\{id,where,what,who,tried\}) 